{"version":3,"sources":["routes/card.js","routes/overAllEmotion.js","routes/CreateRoom.js","routes/PhotoCapture.js","routes/Room.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","root","maxWidth","ImgMediaCard","props","classes","cards","items","forEach","item","console","log","link","photoAdd","undefined","photo","smallThumbnail","push","style","display","Card","className","CardActionArea","CardMedia","component","alt","title","height","image","CardContent","Typography","gutterBottom","variant","color","author","CardActions","Button","size","href","theme","root4","flexGrow","paper","padding","spacing","textAlign","palette","text","secondary","barStyle","percentage","pulse","keyframes","styled","div","OverAllEmotion","photos","maxEmotionCalle","maxEmotionCountCalle","maxEmotionCaller","maxEmotionCountCaller","useState","setcards","localStorage","getItem","JSON","parse","emotionCountOfCaller","emotionCountOfCalle","state","element","callerPer","length","callePer","emotionMap","list1","axios","get","then","res","data","i","obj","volumeInfo","authors","previewLink","imageLinks","catch","err","SadBar","HappyBar","NeutralBar","AngryBar","Grid","Paper","toFixed","container","xs","margin","root2","width","root3","CreateRoom","inputVal","setInput","setcard","useEffect","card","ph1","ph2","emoji","id","onClick","uuid","history","TextField","required","label","defaultValue","onChange","Event","target","value","disabled","PhotoCapture","streaming","userVideo","document","getElementById","partnerVideo","canvas","partnerCanvas","capturePictures","clearphoto","context","getContext","fillStyle","fillRect","toDataURL","context1","drawImage","takepicture","setAttribute","media","Room","useRef","peerRef","socketRef","otherUser","userStream","createPeer","userID","peer","RTCPeerConnection","iceServers","urls","credential","username","onicecandidate","handleICECandidateEvent","ontrack","handleTrackEvent","onnegotiationneeded","current","createOffer","offer","setLocalDescription","payload","caller","sdp","localDescription","emit","e","handleNegotiationNeededEvent","handleRecieveCall","incoming","desc","RTCSessionDescription","setRemoteDescription","getTracks","track","addTrack","createAnswer","answer","handleAnswer","message","candidate","handleNewICECandidateMsg","RTCIceCandidate","addIceCandidate","srcObject","streams","navigator","mediaDevices","getUserMedia","audio","video","stream","setItem","io","connect","match","params","roomID","on","callUser","autoPlay","ref","cnt","alert","myvar","setInterval","axiosConfig","headers","data1","data2","a","post","r","slice","status","clearInterval","stop","close","stringify","setTimeout","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.2a55a63e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nconst useStyles = makeStyles({\r\n  root: { \r\n    maxWidth: 345,\r\n  },\r\n});\r\n\r\nexport default function ImgMediaCard(props) {\r\n  const classes = useStyles();\r\n//   console.log( props.items );\r\n\r\n  var cards = [];\r\n\r\n  props.items.forEach( item => {\r\n        console.log(item.link);\r\n        let photoAdd = \"\";\r\n        if( item.photo !==  undefined ) photoAdd = item.photo.smallThumbnail;\r\n        cards.push( \r\n             <div style = { { display:\"block\" } } >\r\n            <Card className={classes.root}>\r\n            <CardActionArea>\r\n                <CardMedia\r\n                component=\"img\"\r\n                alt={item.title}\r\n                height=\"140\"\r\n                image={photoAdd}\r\n                title={item.title}\r\n                />\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\"> {item.title}  </Typography>\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\"> {item.author} </Typography>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            <CardActions>\r\n                <Button size=\"small\" color=\"primary\" href = {item.link} > Go to Book </Button>\r\n            </CardActions>\r\n            </Card>\r\n            </div>\r\n        );\r\n  });\r\n\r\n  return (\r\n    <div>\r\n        {cards}\r\n    </div>\r\n    \r\n  \r\n  );\r\n}\r\n","import React , { useState }  from \"react\";\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport styled, { keyframes } from 'styled-components'\r\nimport  ImgMediaCard from './card'\r\nimport axios from \"axios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root4: {\r\n      flexGrow: 1,\r\n    },\r\n    paper: {\r\n      padding: theme.spacing(2),\r\n      textAlign: 'center',\r\n      color: theme.palette.text.secondary,\r\n    },\r\n  \r\n  }));\r\n\r\nfunction barStyle( percentage ){\r\n  const pulse = keyframes`from{\r\n        width: 350px;\r\n    }\r\n    to{\r\n        width: ${percentage*300 + 350}px;\r\n    }`;\r\n\r\n    return styled.div`\r\n    border:yellow 2px solid;\r\n    border-radius: 3px;\r\n    font-size : 40px;\r\n    background-color:rgba(42, 148, 197, 0.63);\r\n    width: 200px;\r\n    height: 70px;\r\n    position: relative;\r\n    animation-name: ${pulse};\r\n    animation-duration: 7s;\r\n    animation-iteration-count: 1;\r\n    animation-fill-mode: forwards;\r\n  `;\r\n\r\n}\r\n\r\nfunction OverAllEmotion ( props ){\r\n    const classes = useStyles();\r\n    let maxEmotionCalle = 'happy' , maxEmotionCountCalle = 0;\r\n    let maxEmotionCaller = 'happy' , maxEmotionCountCaller = 0;\r\n    var photos ; \r\n\r\n    const [ cards , setcards ] = useState( [ ] );\r\n\r\n    photos = localStorage.getItem('photos'); //console.log(photos);\r\n    if( localStorage.getItem('photos') )\r\n    {\r\n        photos = JSON.parse(localStorage.getItem('photos')); //console.log(photos);\r\n        \r\n        var emotionCountOfCaller = {'angry': 0, 'disgust': 0, 'fear': 0, 'happy': 0, 'sad': 0, 'surprise': 0, 'neutral' : 0};\r\n        var emotionCountOfCalle  = {'angry': 0, 'disgust': 0, 'fear': 0, 'happy': 0, 'sad': 0, 'surprise': 0, 'neutral' : 0};\r\n        var emotionCount= [ 'angry' , 'disgust' , 'fear' , 'happy' , 'sad' , 'surprise' , 'neutral'  ];\r\n        photos.forEach( photo => {\r\n            // photo => [{state , emoji , baseurl } *2  ]\r\n            emotionCountOfCaller[photo[0].state] += 1;\r\n            emotionCountOfCalle[photo[1].state] += 1;\r\n        });\r\n        \r\n        emotionCount.forEach ( element => { \r\n            if(  maxEmotionCountCalle < emotionCountOfCalle[element] ) {\r\n                maxEmotionCalle = element;\r\n                maxEmotionCountCalle = emotionCountOfCalle[element];\r\n            }\r\n            if(  maxEmotionCountCaller < emotionCountOfCaller[element] ) {\r\n                maxEmotionCaller = element;\r\n                maxEmotionCountCaller = emotionCountOfCaller[element];\r\n            }   \r\n        });\r\n\r\n        // maxEmotionCaller = max( emotionCountOfCaller[\"angary\"] , emotionCountOfCaller[\"happy\"] , emotionCountOfCaller[\"neutral\"]  , emotionCountOfCaller[\"sad\"]);\r\n        let callerPer = (maxEmotionCountCaller/ photos.length ) * 100;\r\n        let callePer = (maxEmotionCountCalle/ photos.length ) * 100;\r\n        var emotionMap={'angry': '😠','disgust': '🤢', 'fear': '😱', 'happy':'😁', 'sad': '☹️', 'surprise': '😮', 'neutral' : '😐'};\r\n        // console.log( emotionMap[maxEmotionCaller] + callerPer );\r\n        \r\n        // book collection for given emotion\r\n        \r\n        var list1=[];\r\n\r\n        axios.get(`https://www.googleapis.com/books/v1/volumes?q=${maxEmotionCaller}+inauthor:keyes&key=AIzaSyCuZr0YMzeP9337Lj2zVVeg5ew1C9eUFaw`)\r\n        .then((res)=>{\r\n            let data= res.data.items;\r\n            for(let i=0;i<6;i++)\r\n            {\r\n                let obj={\"title\":data[i].volumeInfo.title,\r\n                          \"author\":data[i].volumeInfo.authors[0],\r\n                          \"link\":data[i].volumeInfo.previewLink,\r\n                          \"photo\":data[i].volumeInfo.imageLinks,\r\n                            };\r\n                \r\n                list1.push(obj);   \r\n            }\r\n            setcards( list1 );\r\n        })\r\n        .catch((err)=>console.log(err));\r\n\r\n      \r\n        //   const Flexbar = styled.div`\r\n        //   display: flex;\r\n        //   flex-direction: row;\r\n        // `;\r\n          \r\n        let SadBar = barStyle( emotionCountOfCaller[\"sad\"]/photos.length );\r\n        let HappyBar = barStyle( emotionCountOfCaller[\"happy\"]/photos.length );\r\n        let NeutralBar = barStyle( emotionCountOfCaller[\"neutral\"]/photos.length );\r\n        let AngryBar = barStyle( emotionCountOfCaller[\"angry\"]/photos.length );\r\n        \r\n        \r\n        return <div> \r\n            <Grid>\r\n              <Paper className={classes.paper}>\r\n                <br/>\r\n                <HappyBar > Happy 😁 { (emotionCountOfCaller[\"happy\"]/photos.length*100).toFixed(1) }% </HappyBar>\r\n                <NeutralBar> Neutral😐{(emotionCountOfCaller[\"neutral\"]/photos.length*100).toFixed(1) }% </NeutralBar>\r\n                <SadBar > Sad ☹️{(emotionCountOfCaller[\"sad\"]/photos.length*100).toFixed(1) }% </SadBar>\r\n                <AngryBar> Angry 😠{(emotionCountOfCaller[\"angry\"]/photos.length*100).toFixed(1) }% </AngryBar>\r\n                <br/>\r\n              </Paper>\r\n              <Paper className={classes.paper} >\r\n                <h1>Looking very {maxEmotionCaller}!! Here are few books you would prefer to read!</h1>\r\n              <Grid container spacing={3}>\r\n                 < ImgMediaCard items={cards} />\r\n              </Grid>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={6}> \r\n                <Paper className={classes.paper}> \r\n                  <Typography gutterBottom variant=\"h5\" component=\"h1\">{ callerPer }% { emotionMap[maxEmotionCaller] } { maxEmotionCaller } </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              <Grid item xs={6}> \r\n                <Paper className={classes.paper}>\r\n                  <Typography gutterBottom variant=\"h5\" component=\"h1\">{ callePer }% { emotionMap[maxEmotionCalle] }{ maxEmotionCalle } </Typography>\r\n                </Paper>\r\n              </Grid>\r\n            </Grid>\r\n        </div>;\r\n    }\r\n    \r\n    return  <div></div>;\r\n        \r\n};\r\n\r\nexport default OverAllEmotion;","import React , { useState , useEffect } from \"react\";\r\nimport OverAllEmotion from \"./overAllEmotion\";\r\nimport { v1 as uuid } from \"uuid\";\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  root2: {\r\n    '& .MuiTextField-root': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  root3: {\r\n    flexGrow: 1,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: 'center',\r\n    color: theme.palette.text.secondary,\r\n  },\r\n\r\n}));\r\n\r\nconst CreateRoom = (props) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    var [ inputVal , setInput ] = useState(null);\r\n    var [cards , setcard ] = useState([]);\r\n\r\n    useEffect( () => {\r\n        var photos = localStorage.getItem('photos'); //console.log(photos);\r\n        if( localStorage.getItem('photos') )\r\n        {\r\n            photos = JSON.parse(localStorage.getItem('photos')); console.log(photos);\r\n            var card = [];\r\n            photos.forEach( photo => {\r\n                // photo => [{state , emoji , baseurl } *2  ]\r\n                var ph1 = photo[0];\r\n                var ph2 = photo[1];\r\n                card.push(\r\n                  <div className={classes.root3}>\r\n                  <Grid container spacing={3}>\r\n                    <Grid item xs={6}> \r\n                      <Paper className={classes.paper}> \r\n                      {/* <img src={ph1.baseurl} alt=\"img\" width=\"300\" height=\"300\" ></img>  */}\r\n                       {ph1.emoji}\r\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">{ph1.state} </Typography>\r\n                      </Paper>\r\n                    </Grid>\r\n                    <Grid item xs={6}> \r\n                      <Paper className={classes.paper}>\r\n                      {/* <img src={ph2.baseurl} alt=\"img\" width=\"300\" height=\"300\" ></img>  */}\r\n                      {ph2.emoji}\r\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\">{ph2.state} </Typography>\r\n                      </Paper>\r\n                    </Grid>\r\n                  </Grid>\r\n                  </div>\r\n                );\r\n            });\r\n            setcard(card);\r\n        }\r\n      else cards.push(<div> </div>);\r\n\r\n    } , [ localStorage.getItem('photos')] );\r\n    \r\n    \r\n    function createRoom() {\r\n        const id = uuid();\r\n        props.history.push(`/room/${id}`);\r\n    }\r\n    function joinRoom( ) {\r\n        console.log(inputVal);\r\n        props.history.push(`/room/${inputVal}`);\r\n    }\r\n\r\n    return <div>\r\n            <div className={classes.root3}>\r\n                <Grid container spacing={4}>\r\n                    \r\n                    <Grid item xs={3}>\r\n                      <Button id=\"createbtn\" onClick={createRoom} variant=\"contained\" color=\"primary\" >Create Room</Button> \r\n                    </Grid>\r\n                    {/* <input type=\"text\" id=\"roomId\" onChange= { ( Event) => setInput( Event.target.value ) }></input> */}\r\n                    <Grid item xs={3}>\r\n                      <TextField required id=\"roomId\" label=\"Enter RoomId\" defaultValue=\"\" onChange= { ( Event) => setInput( Event.target.value ) } />\r\n                      <Button id=\"joinbtn\" onClick ={joinRoom} variant=\"contained\" color=\"secondary\" > Join ROOM</Button>\r\n                    </Grid>\r\n                    <Grid item xs={3}>\r\n                      <Button id=\"hangbtn\" variant=\"contained\" disabled > Hang Up </Button> \r\n                    </Grid>\r\n                </Grid>\r\n            </div>\r\n            < OverAllEmotion />\r\n            <div>{cards}</div>\r\n          </div>;\r\n}\r\n\r\nexport default CreateRoom;","\r\nconst PhotoCapture  = ( props ) => {\r\n\r\n    var width = 500;    // We will scale the photo width to this\r\n    var height = 500;     // This will be computed based on the input stream\r\n\r\n    var streaming = localStorage.getItem('cam');  //console.log(streaming);\r\n\r\n    var userVideo = document.getElementById('video');\r\n    var partnerVideo = document.getElementById('partnerVideo');\r\n    var canvas = document.getElementById('canvas'); //console.log(canvas);\r\n    var partnerCanvas = document.getElementById('partnerCanvas');\r\n    var photo = document.getElementById('photo');\r\n    var startbutton = document.getElementById('startbutton');\r\n    var capturePictures = [];\r\n\r\n    if (streaming && !( userVideo == null) ) {\r\n    // height = userVideo.videoHeight / (userVideo.videoWidth/width);\r\n    \r\n    // if (isNaN(height)) {\r\n    //     height = width / (4/3);\r\n    // }\r\n    \r\n    // userVideo.setAttribute('width', width);\r\n    // userVideo.setAttribute('height', height);\r\n    // if( ! partnerVideo === null )\r\n    // {\r\n    //   partnerVideo.setAttribute('height', height);\r\n    //   // partnerVideo.setAttribute('width', width);\r\n    // }\r\n    canvas.setAttribute('width', width);\r\n    canvas.setAttribute('height', height);\r\n    partnerCanvas.setAttribute('width', width);\r\n    partnerCanvas.setAttribute('height', height);\r\n    \r\n    }\r\n\r\n    // startbutton.addEventListener('click', (ev) => {\r\n    //   takepicture();\r\n    //   ev.preventDefault();\r\n    // }, false);\r\n    if( !( userVideo === null ))\r\n    clearphoto();\r\n\r\n  function clearphoto() {\r\n    var context = canvas.getContext('2d');\r\n    context.fillStyle = \"#AAA\";\r\n    context.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    var data = canvas.toDataURL('image/png');\r\n    // photo.setAttribute('src', data);\r\n\r\n    var context1 = partnerCanvas.getContext('2d');\r\n    context1.fillStyle = \"#AAA\";\r\n    context1.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n    // var data = partnerCanvas.toDataURL('image/png');\r\n\r\n    takepicture()\r\n  }\r\n\r\n  function convertURIToImageData(URI) {\r\n    return new Promise(function(resolve, reject) {\r\n      if (URI == null) return reject();\r\n      var canvas = document.createElement('canvas'),\r\n          context = canvas.getContext('2d'),\r\n          image = new Image();\r\n      image.addEventListener('load', function() {\r\n        canvas.width = image.width;\r\n        canvas.height = image.height;\r\n        context.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n        resolve(context.getImageData(0, 0, canvas.width, canvas.height));\r\n      }, false);\r\n      image.src = URI;\r\n    });\r\n  }\r\n  \r\n  function takepicture() {\r\n    var context = canvas.getContext('2d');\r\n    var context1 = partnerCanvas.getContext('2d');\r\n    if (width && height) {\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      context.drawImage(userVideo, 0, 0, width, height);\r\n      // console.log(canvas);\r\n      var data = canvas.toDataURL('image/png');\r\n      // photo.setAttribute('src', data);\r\n    \r\n      capturePictures.push(data);\r\n      \r\n      partnerCanvas.width = width;\r\n      partnerCanvas.height = height;\r\n      context1.drawImage(partnerVideo, 0, 0, width, height);\r\n      // console.log(partnerCanvas);\r\n      data = partnerCanvas.toDataURL('image/png');\r\n      // photo.setAttribute('src', data);\r\n    \r\n      capturePictures.push(data);\r\n\r\n    // convertURIToImageData( data ).then(function(imageData) {\r\n        // Here you can use imageData\r\n        // console.log(imageData);\r\n      // });\r\n\r\n    } else {\r\n      clearphoto();\r\n    }\r\n  }\r\n\r\n  return capturePictures;\r\n\r\n}\r\n\r\nexport default PhotoCapture;","import React, { useRef, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport PhotoCapture from \"./PhotoCapture\";\r\nimport axios from 'axios';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 345,\r\n  },\r\n  media: {\r\n    height: 140,\r\n  },\r\n});\r\n\r\n\r\nconst Room = (props) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    const userVideo = useRef();\r\n    const partnerVideo = useRef();\r\n    const peerRef = useRef();\r\n    const socketRef = useRef();\r\n    const otherUser = useRef();\r\n    const userStream = useRef();\r\n    var cards = [];\r\n    var photos = [];\r\n\r\n    useEffect(() => {\r\n        navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(stream => {\r\n            userVideo.current.srcObject = stream;\r\n            userStream.current = stream;\r\n            \r\n            localStorage.setItem( 'cam' , true );\r\n\r\n            socketRef.current = io.connect(\"/\");\r\n            socketRef.current.emit(\"join room\", props.match.params.roomID);\r\n\r\n            socketRef.current.on('other user', userID => {\r\n                callUser(userID);\r\n                otherUser.current = userID;\r\n            });\r\n\r\n            socketRef.current.on(\"user joined\", userID => {\r\n                otherUser.current = userID;\r\n            });\r\n\r\n            socketRef.current.on(\"offer\", handleRecieveCall);\r\n\r\n            socketRef.current.on(\"answer\", handleAnswer);\r\n\r\n            socketRef.current.on(\"ice-candidate\", handleNewICECandidateMsg);\r\n\r\n        });\r\n\r\n    }, [ ]);\r\n\r\n    function callUser(userID) {\r\n        peerRef.current = createPeer(userID);\r\n        userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\r\n    }\r\n\r\n    function createPeer(userID) {\r\n        const peer = new RTCPeerConnection({\r\n            iceServers: [\r\n                {\r\n                    urls: \"stun:stun.stunprotocol.org\"\r\n                },\r\n                {\r\n                    urls: 'turn:numb.viagenie.ca',\r\n                    credential: 'muazkh',\r\n                    username: 'webrtc@live.com'\r\n                },\r\n            ]\r\n        });\r\n\r\n        peer.onicecandidate = handleICECandidateEvent;\r\n        peer.ontrack = handleTrackEvent;\r\n        peer.onnegotiationneeded = () => handleNegotiationNeededEvent(userID);\r\n\r\n        return peer;\r\n    }\r\n\r\n    function handleNegotiationNeededEvent(userID) {\r\n        peerRef.current.createOffer().then(offer => {\r\n            return peerRef.current.setLocalDescription(offer);\r\n        }).then(() => {\r\n            const payload = {\r\n                target: userID,\r\n                caller: socketRef.current.id,\r\n                sdp: peerRef.current.localDescription\r\n            };\r\n            socketRef.current.emit(\"offer\", payload);\r\n        }).catch(e => console.log(e));\r\n    }\r\n\r\n    function handleRecieveCall(incoming) {\r\n        peerRef.current = createPeer();\r\n        const desc = new RTCSessionDescription(incoming.sdp);\r\n        peerRef.current.setRemoteDescription(desc).then(() => {\r\n            userStream.current.getTracks().forEach(track => peerRef.current.addTrack(track, userStream.current));\r\n        }).then(() => {\r\n            return peerRef.current.createAnswer();\r\n        }).then(answer => {\r\n            return peerRef.current.setLocalDescription(answer);\r\n        }).then(() => {\r\n            const payload = {\r\n                target: incoming.caller,\r\n                caller: socketRef.current.id,\r\n                sdp: peerRef.current.localDescription\r\n            }\r\n            socketRef.current.emit(\"answer\", payload);\r\n        })\r\n    }\r\n\r\n    function handleAnswer(message) {\r\n        const desc = new RTCSessionDescription(message.sdp);\r\n        peerRef.current.setRemoteDescription(desc).catch(e => console.log(e));\r\n    }\r\n\r\n    function handleICECandidateEvent(e) {\r\n        if (e.candidate) {\r\n            const payload = {\r\n                target: otherUser.current,\r\n                candidate: e.candidate,\r\n            }\r\n            socketRef.current.emit(\"ice-candidate\", payload);\r\n        }\r\n    }\r\n\r\n    function handleNewICECandidateMsg(incoming) {\r\n        const candidate = new RTCIceCandidate(incoming);\r\n\r\n        peerRef.current.addIceCandidate(candidate)\r\n            .catch(e => console.log(e));\r\n    }\r\n\r\n    function handleTrackEvent(e) {\r\n        // if ( ! partnerVideo.current === null )\r\n        partnerVideo.current.srcObject = e.streams[0];\r\n    };\r\n\r\n    function handleHang()\r\n    {\r\n        \r\n        localStorage.setItem( 'cam' , false );\r\n        const tracks = document.getElementById('video').srcObject.getTracks();\r\n        tracks.forEach(track => {\r\n            track.stop();\r\n        });\r\n\r\n        if ( ! partnerVideo.current === null ) {\r\n            partnerVideo.current.srcObject.getTracks().forEach(track => track.stop());\r\n        }\r\n        \r\n        if ( ! peerRef.current === null ) peerRef.current.close();\r\n        console.log(\"cam closed!!\");\r\n        // console.log(photos);\r\n        localStorage.setItem('photos' , JSON.stringify(photos) );\r\n        setTimeout(props.history.push('/') , 60000);\r\n        \r\n    }\r\n     \r\n    function handleCapture(){\r\n        if( !(userVideo.current === \"undefined\") && ! ( partnerVideo === \"indefined\" ) )\r\n            {\r\n                var cnt = 0;\r\n                alert(\"moment capturing started!\");\r\n                function mytimer(){\r\n\r\n                    var photo =  PhotoCapture( );\r\n                    // photos.push(photo);\r\n                    // console.log(photo);\r\n                    // // photo => [ baseurl , baseurl ]\r\n                    // api call data.photo[0] & data.photo[1] =>  state +\"#\" + emoji \r\n                    let axiosConfig = {\r\n                        headers: {\r\n                            'Content-Type': 'application/json;charset=UTF-8',\r\n                            \"Access-Control-Allow-Origin\": \"*\",\r\n                        }\r\n                      };\r\n                    var data1 = \"\";\r\n                    var data2 = \"\";\r\n                    var a={'angry': '😠','disgust': '🤢', 'fear': '😱', 'happy':'😁', 'sad': '☹️', 'surprise': '😮', 'neutral' : '😐'};\r\n                    var payload = [ { 'state':'neutral'  , 'emoji':'😐' , 'baseurl': \"photo[0]\" } , { 'state': 'neutral' , 'emoji':'😐' , 'baseurl':\"photo[1]\" } ];\r\n                    \r\n                    axios.post(\"http://143.110.249.208:1111/\" ,  { \"baseurl\": photo[0] } , axiosConfig )\r\n                    .then(r => { \r\n                        console.log(r);\r\n                        data1 = r.data; \r\n                        payload[0]['state'] = data1.slice(0 , data1.length-3 );\r\n                        payload[0]['emoji'] = a[payload[0]['state']];\r\n                    } )\r\n                    .catch(e => console.log(e) );\r\n\r\n                    axios.post(\"http://143.110.249.208:1111/\" ,  { \"baseurl\": photo[1] } , axiosConfig )\r\n                    .then(r => { \r\n                        console.log(r); data2 = r.data; \r\n                        payload[1]['state'] = data2.slice(0 , data2.length-3 );\r\n                        payload[1]['emoji'] = a[payload[1]['state']];\r\n                    } )\r\n                    .catch(e => console.log(e) );\r\n\r\n                    // console.log(payload[0]);\r\n                    photos.push(payload);\r\n                    // photos.push([data1 , data2]);\r\n                    cnt++;\r\n                    const status = localStorage.getItem('cam');\r\n                    if( cnt === 7 && status ) clearInterval(myvar);\r\n                }\r\n                var myvar = setInterval( mytimer , 6000);\r\n                \r\n            }\r\n    }\r\n\r\n    return (\r\n        <Grid container spacing={1}>\r\n            <Grid item xs={6}>\r\n                <Card className={classes.root}>\r\n            <CardActionArea>\r\n                <video id = \"video\" autoPlay ref={userVideo} width=\"100%\" height =\"100%\"></video>\r\n                <CardContent>\r\n                <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                    User\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                    room Id : { props.match.params.roomID } \r\n                </Typography>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            <CardActions>\r\n                <Button size=\"small\" variant=\"contained\" color=\"primary\" id=\"startbutton\" onClick={handleCapture} >\r\n                Start Capture Moments!\r\n                </Button>\r\n                <Button size=\"small\" variant=\"contained\" color=\"secondary\" id=\"hangbtn\" onClick={handleHang} >\r\n                Hang Up\r\n                </Button>\r\n            </CardActions>\r\n        </Card>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <Card className={classes.root}>\r\n            <CardActionArea>\r\n                <video id=\"partnerVideo\" autoPlay ref={partnerVideo} width=\"100%\" height =\"100%\"></video>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                        Partner\r\n                    </Typography>\r\n                </CardContent>\r\n            </CardActionArea>\r\n        </Card>\r\n            </Grid>\r\n            <Grid item xs={12} >\r\n                {cards}\r\n            </Grid>\r\n      </Grid>\r\n    );\r\n};\r\n\r\nexport default Room;","import React from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport CreateRoom from \"./routes/CreateRoom\";\nimport Room from \"./routes/Room\";\nimport './App.css';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n\n  return (\n\n    <div className={classes.root}>\n\n    <Grid container spacing={3}>\n    <Grid item xs={12}>\n        <Paper className={classes.paper}>\n        <Typography gutterBottom variant=\"h3\" component=\"h2\">\n                  LOOK </Typography>\n          \n        </Paper>\n      </Grid>\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n          <BrowserRouter>\n          <Switch>\n            <Route path=\"/\" exact component={CreateRoom} />\n            <Route path=\"/room/:roomID\" component={Room} />\n          </Switch>\n          </BrowserRouter>\n        </Paper>\n      </Grid>\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                    recent captured moment! </Typography>\n          <div id=\"pictures\">\n            <img id = \"photo\"/>\n            <canvas id=\"canvas\" width=\"320\" height=\"240\" ></canvas>\n            <canvas id=\"partnerCanvas\" width=\"320\" height=\"240\" ></canvas>\n          </div>\n        </Paper>\n      </Grid>\n    </Grid>\n  </div>\n\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}